{% extends "layout/main.html" %} 
{% from "macro/mc_form.html" import render_field, render_form,render_form_noSubmit, render_checkbox_field,render_date_field %} 


{% macro table_example() %}
<div class="tabs-container">
                        <ul class="nav nav-tabs">
                            <li class="active"><a data-toggle="tab" href="#tab-1" aria-expanded="true"> This is tab</a></li>
                            <li class=""><a data-toggle="tab" href="#tab-2" aria-expanded="false">This is second tab</a></li>
                        </ul>
                        <div class="tab-content">
                            <div id="tab-1" class="tab-pane active">
                                <div class="panel-body" style="height:300px;overflow-y:auto;">
                                    <!-- <strong>Lorem ipsum dolor sit amet, consectetuer adipiscing</strong> -->

<table class="table table-hover no-margins">
                                            <thead>
                                            <tr>
                                                <th>Status</th>
                                                <th>Date</th>
                                                <th>User</th>
                                                <th>Value</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td><small>Pending...</small></td>
                                                <td><i class="fa fa-clock-o"></i> 11:20pm</td>
                                                <td>Samantha</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 24% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                </div>
                            </div>
                            <div id="tab-2" class="tab-pane">
                                <div class="panel-body">
                                    <strong>Donec quam felis</strong>
                                    <select class="form-control" multiple="">
                                            <option>option 1</option>
                                            <option>option 2</option>
                                            <option>option 3</option>
                                            <option>option 4</option>
                                            <option>option 4</option>
                                        </select>
                                        
                                    <p>Thousand unknown plants are noticed by me: when I hear the buzz of the little world among the stalks, and grow familiar with the countless indescribable forms of the insects
                                        and flies, then I feel the presence of the Almighty, who formed us in his own image, and the breath </p>

                                    <p>I am alone, and feel the charm of existence in this spot, which was created for the bliss of souls like mine. I am so happy, my dear friend, so absorbed in the exquisite
                                        sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet.</p>
                                </div>
                            </div>
                        </div>


                    </div>
{% endmacro %}


{% macro sample_table_row() -%}
			<tr>
				<td>1</td>
				<td>Master project</td>
				<td>Patrick Smith</td>
				<td>$892,074</td>
				<td>Inceptos Hymenaeos Ltd</td>
				<td><strong>20%</strong></td>
				<td>Jul 14, 2015</td>
				<td><a href="#"><i class="fa fa-circle text-navy"></i></a></td>
			</tr>
{% endmacro %}
{% macro sample_table_row1() -%}
			<tr>
				<td>1</td>
				<td>Master project</td>
				<td>Patrick Smith</td>
				<td>$892,074</td>
				<td>Inceptos Hymenaeos Ltd</td>
				<td><strong>20%</strong></td>
				<td>Jul 14, 2015</td>
				<td><a href="#"><i class="fa fa-circle text-danger"></i></a></td>
			</tr>
{% endmacro %}
{% macro sample_table() -%}

<div class="table-responsive">
	<table class="table table-striped">
		<tbody>
		{% for _ in range(4) %}
			{{sample_table_row() }}
			{{sample_table_row1() }}
		{% endfor %}
		</tbody>
	</table>
</div>

{% endmacro %}	

{% macro sample_side_table() %}

<div class="ibox float-e-margins">
<!--                                     <div class="ibox-title">
                                        <h5>User project list</h5>
                                        <div class="ibox-tools">
                                            <a class="collapse-link">
                                                <i class="fa fa-chevron-up"></i>
                                            </a>
                                            <a class="close-link">
                                                <i class="fa fa-times"></i>
                                            </a>
                                        </div>
                                    </div> -->
                                    <div class="ibox-content">
                                        <table class="table table-hover no-margins">
                                            <thead>
                                            <tr>
                                                <th>Status</th>
                                                <th>Date</th>
                                                <th>User</th>
                                                <th>Value</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td><small>Pending...</small></td>
                                                <td><i class="fa fa-clock-o"></i> 11:20pm</td>
                                                <td>Samantha</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 24% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-warning">Canceled</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 10:40am</td>
                                                <td>Monica</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><small>Pending...</small> </td>
                                                <td><i class="fa fa-clock-o"></i> 01:30pm</td>
                                                <td>John</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 54% </td>
                                            </tr>
                                            <tr>
                                                <td><small>Pending...</small> </td>
                                                <td><i class="fa fa-clock-o"></i> 02:20pm</td>
                                                <td>Agnes</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 12% </td>
                                            </tr>
                                            <tr>
                                                <td><small>Pending...</small> </td>
                                                <td><i class="fa fa-clock-o"></i> 09:40pm</td>
                                                <td>Janet</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 22% </td>
                                            </tr>
                                            <tr>
                                                <td><span class="label label-primary">Completed</span> </td>
                                                <td><i class="fa fa-clock-o"></i> 04:10am</td>
                                                <td>Amelia</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 66% </td>
                                            </tr>
                                            <tr>
                                                <td><small>Pending...</small> </td>
                                                <td><i class="fa fa-clock-o"></i> 12:08am</td>
                                                <td>Damian</td>
                                                <td class="text-navy"> <i class="fa fa-level-up"></i> 23% </td>
                                            </tr>                                          
                                              </tbody>
                                        </table>
                                    </div>
                                </div>
{% endmacro %}


{% macro todo_box() -%}
 
                                <div class="ibox float-e-margins">
<!--                                     <div class="ibox-title">
                                        <h5>Small todo list</h5>
                                        <div class="ibox-tools">
                                            <a class="collapse-link">
                                                <i class="fa fa-chevron-up"></i>
                                            </a>
                                            <a class="close-link">
                                                <i class="fa fa-times"></i>
                                            </a>
                                        </div>
                                    </div> -->
                                    <div class="ibox-content" >
                                    

                                        <ul class="todo-list m-t small-list" style="overflow-y:auto;height:300px">
                                            <li>
                                                <a href="#" class="check-link"><i class="fa fa-square-o"></i> </a>
                                                <span class="m-l-xs">Buy a milk</span>

                                            </li>
                                            <li>
                                                <a href="#" class="check-link"><i class="fa fa-square-o"></i> </a>
                                                <span class="m-l-xs">Go to shop and find some products.</span>

                                            </li>
                                            <li>
                                                <a href="#" class="check-link"><i class="fa fa-square-o"></i> </a>
                                                <span class="m-l-xs">Send documents to Mike</span>
                                                <small class="label label-primary"><i class="fa fa-clock-o"></i> 1 mins</small>
                                            </li>
                                            <li>
                                                <a href="#" class="check-link"><i class="fa fa-square-o"></i> </a>
                                                <span class="m-l-xs">Go to the doctor dr Smith</span>
                                            </li>
                                            <li>
                                                <a href="#" class="check-link"><i class="fa fa-check-square"></i> </a>
                                                <span class="m-l-xs todo-completed">Plan vacation</span>
                                            </li>
                                            <li>
                                                <a href="#" class="check-link"><i class="fa fa-square-o"></i> </a>
                                                <span class="m-l-xs">Create new stuff</span>
                                            </li>
                                            <li>
                                                <a href="#" class="check-link"><i class="fa fa-square-o"></i> </a>
                                                <span class="m-l-xs">Call to Anna for dinner</span>
                                            </li>
                                            <li>
                                                <a href="#" class="check-link"><i class="fa fa-square-o"></i> </a>
                                                <span class="m-l-xs">Call to Anna for dinner</span>
                                            </li>
                                            <li>
                                                <a href="#" class="check-link"><i class="fa fa-square-o"></i> </a>
                                                <span class="m-l-xs">Call to Anna for dinner</span>
                                            </li>
                                            <li>
                                                <a href="#" class="check-link"><i class="fa fa-square-o"></i> </a>
                                                <span class="m-l-xs">Call to Anna for dinner</span>
                                            </li>
                                            <li>
                                                <a href="#" class="check-link"><i class="fa fa-square-o"></i> </a>
                                                <span class="m-l-xs">Call to Anna for dinner</span>
                                            </li>
                                            <li>
                                                <a href="#" class="check-link"><i class="fa fa-square-o"></i> </a>
                                                <span class="m-l-xs">Call to Anna for dinner</span>
                                            </li>
                                            <li>
                                                <a href="#" class="check-link"><i class="fa fa-square-o"></i> </a>
                                                <span class="m-l-xs">Call to Anna for dinner</span>
                                            </li>
                                            <li>
                                                <a href="#" class="check-link"><i class="fa fa-square-o"></i> </a>
                                                <span class="m-l-xs">Call to Anna for dinner</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
 
{% endmacro %}













{% block styles %}
<style>
textarea{ 
    background-color:#F7F7F7 !important;
}
#chart_containerx {
    height:100%;
    width:100%;
    position:absolute;
}
</style>
{% endblock %}
{% block scripts %}
{{super()}}
<!-- Flot -->
<script src="{{url_for('static',filename='js/plugins/flot/jquery.flot.js')}}"></script>
<script src="{{url_for('static',filename='js/plugins/flot/jquery.flot.tooltip.min.js')}}"></script>
<script src="{{url_for('static',filename='js/plugins/flot/jquery.flot.spline.js')}}"></script>
<script src="{{url_for('static',filename='js/plugins/flot/jquery.flot.resize.js')}}"></script>
<script src="{{url_for('static',filename='js/plugins/flot/jquery.flot.pie.js')}}"></script>

<!-- Peity -->
<script src="{{url_for('static',filename='js/plugins/peity/jquery.peity.min.js')}}"></script>
<script src="{{url_for('static',filename='js/demo/peity-demo.js')}}"></script>

<!-- jQuery UI -->
<script src="{{url_for('static',filename='js/plugins/jquery-ui/jquery-ui.min.js')}}"></script>

<!-- GITTER -->
<script src="{{url_for('static',filename='js/plugins/gritter/jquery.gritter.min.js')}}"></script>

<!-- Sparkline -->
<script src="{{url_for('static',filename='js/plugins/sparkline/jquery.sparkline.min.js')}}"></script>
<script src="{{url_for('static',filename='js/demo/sparkline-demo.js')}}"></script>

<!-- ChartJS-->
<script src="{{url_for('static',filename='js/plugins/chartJs/Chart.min.js')}}"></script>

<!-- Toastr -->
<script src="{{url_for('static',filename='js/plugins/toastr/toastr.min.js')}}"></script>

<!-- taffydb -->
<script src="{{url_for('static',filename='assets/js/taffydb/taffy-min.js')}}"></script>

<!-- Highcharts -->
<script src="http://code.highcharts.com/highcharts.js"></script>  
<!-- 
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://code.highcharts.com/stock/modules/exporting.js"></script>
 -->
 
<!-- fullscreen 
<script src="{{url_for('static',filename='assets/js/fullscreen/jquery.fullscreen-min.js')}}"></script>
-->

<script>

function fn_onProducer() {
	var $form = $('#form_id');
	var time = Math.round(new Date().getTime()/1000);
	var $hiddenInput = $('<input/>',{type:'hidden',id: 'time',value:time});
	$hiddenInput.appendTo($form);
	$('#ep_time').val(time);
	$form.attr({'action' : '/client/kaf_prod'});
	$form.attr({'method' : 'POST'});
	$form.submit();
}

function fn_onPollData2() {
	var targetUrl = '/client/kaf_poll';
	var param = {};
	param['topic'] = $('#ep_id').val();
	param['partition'] = $('#s_part').val();
	param['offset'] = $('#s_offset').val();
	param['poll_size'] = $('#s_poll_size').val();
	console.log(JSON.stringify(param))
	$.postJSON(targetUrl, param, function(d){
		var _data = (JSON.stringify(d,null,'  '));
		$('#poll_view').text(_data);
	});
}

function fn_onPollData() {
	$(document).fullScreen(true);
}

$(document).ready(function(){
	$('#form_save').click(fn_onProducer);
	$('#poll_data').click(fn_onPollData);
	var rand_val = Math.round(Math.random()*1000)/100;
	$('#ep_value').val(rand_val);
});

</script>


<script type="text/javascript">
function callback_form_show(e) {
	e.preventDefault();
	var time_type = $('#time_type').val();
	var ep_day = $('#time_day').val();
	var ep_id = $('#ep_id').val();
	var param = {
		'ep_day' : ep_day
		, 'ep_id' : ep_id
		, 'time_type' : time_type
	} 
	$.getJSON('/client/chart_data',param,show_chart);
}

function show_chart(cdata) {
	var options = {
			'chart' :{ 
				type: 'spline',
				zoomType: 'x'
			},
			'legend': {
			},
	        plotOptions: {
	        	line : {
	        		dataLabels : {
	        			enabled : true
	        		},
	        		enableMouseTracking: false
	        	}
	        },
	        xAxis: {
	            categories: cdata['ep_time']
	        },        
			'series': [
				{'data':  cdata['ep_data'], 'name': '1층 온도센서#1'},
			],
			'subtitle': {'text': ''},
			'title': {'text': '한라 시그마 밸리 IoT'},
			'yAxis': {'title': {'text': 'Number of Employees'}}			
	}
	var chart = Highcharts.chart('chart_container', options);
	chart.setSize(null);
}

$(document).ready(function(){
	$.getJSON('/client/chart_data',show_chart);
	$('#form_show').click(callback_form_show);
});

function do_fullscreen(){
//	$(document).fullScreen(true);
}


</script>

{% endblock %} 

{% macro left_view(line) %}

<h1 class="m-b-xs">26,900</h1>
<small> Sales in current month </small>
<div id="sparkline{{line}}" class="m-b-sm">
	<canvas
		style="display: inline-block; width: 331px; height: 50px; vertical-align: top;"
		width="331" height="50"></canvas>
</div>
<div class="row">
	<div class="col-xs-4">
		<small class="stats-label">Pages / Visit</small>
		<h4>236 321.80</h4>
	</div>

	<div class="col-xs-4">
		<small class="stats-label">% New Visits</small>
		<h4>46.11%</h4>
	</div>
	<div class="col-xs-4">
		<small class="stats-label">Last week</small>
		<h4>432.021</h4>
	</div>
</div>

{% endmacro %}




{% block container %}

<div class="p-w-md m-t-sm">
	<div class="row">
		<div class="col-lg-2">
			<div class="row">
			{{ left_view(2) }}
			</div>
			<div class="row">
			{{ left_view(4) }}
			</div>
		
		</div>
		<div class="col-lg-7">
			<!-- MAIN -->
			<div class="row">
				<div class="col-md-12 m-b">
					<!-- CHART -->
					<div class="ibox-content">
					<div id='chart_container' style="width:100%;height:300px;padding-top: 10px;"></div>
					</div>
					<!-- CHART -->
				</div>			
				<div class="col-md-12">
					<div class="ibox float-e-margins">
					<!-- 	<div class="ibox-title">
							<h5>TEST</h5>
						</div> -->
						<div class="ibox-content">
							{{ sample_table() }}
						</div>
					</div>


				</div>			
			</div>
			<!-- MAIN -->
		
		</div>
	<div class="col-lg-3">
		<div class="row">
		{% call render_form_noSubmit(form, form_id='form_id') %}
			<div class="col-md-6">
				{{ render_field(form.time_type) }}
			</div>
			<div class="col-md-6">
				{{ render_field(form.time_day) }}
			</div>
			<div class="col-md-12">
				{{ render_field(form.ep_id) }}
			</div>
			<div class="col-md-12">
				<div class="text-right">
					<button id="form_show" class='btn btn-success btn-sm'>조회</button>
				</div>
			</div>
		{% endcall %}
		</div>
	</div>		
		<div class="col-lg-3">
			<div class="row m-b">
			{{ table_example() }}
			</div>
			<div class="row" style="display:none;">
			{{ sample_side_table() }}
			</div>
		</div>
	</div>
</div>



{% endblock container %}

